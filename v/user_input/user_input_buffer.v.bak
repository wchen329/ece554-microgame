
//=======================================================
//  This code is generated by Terasic System Builder
//=======================================================

module user_input(

 //////////// CLOCK //////////
    input               clk,

	 input			rst,

 //////////// GPIO_0, GPIO_0 connect to GPIO Default //////////
    inout       [35:0]  GPIO,
	 
	 output reg	[4:0] ops
);

wire txd;
wire rxd;
wire iocs;
wire iorw;
wire rda;
wire tbr;
wire [1:0] ioaddr;
wire [7:0] databus;
wire [1:0] br_cfg;

wire [4:0] get_ops;

always @(posedge clk) begin
	if (rst) begin
		ops = 5'b0;
	end
	if (get_ops != 5'b0) begin
		ops = get_ops | ops;
	end
end

// LED[9] : indicator for RX signal
// LED[8] : indicator for TX signal
// LED[0] : indicator for rst signal 
// assign LEDR = {~rxd,~txd, ops, 2'b0,rst};

// GPIO[3] as TX output, GPIO[5] as RX input
assign GPIO[3] = 1'b1;
assign rxd = GPIO[5];

// slide switch [9:8] as baudrate config
assign br_cfg = 2'b00;

// Instantiate your spart here
spart spart0(   .clk(clk),
                .rst(rst),
                .iocs(iocs),
                .iorw(iorw),
                .rda(rda),
                .tbr(tbr),
                .ioaddr(ioaddr),
                .databus(databus),
                .txd(txd),
                .rxd(rxd)
            );

// Instantiate your driver here
driver driver0( .clk(clk),
                .rst(rst),
                .br_cfg(br_cfg),
                .iocs(iocs),
                .iorw(iorw),
                .rda(rda),
                .tbr(tbr),
                .ioaddr(ioaddr),
                .databus(databus),
					 .get_ops(get_ops)
            );

		

endmodule
